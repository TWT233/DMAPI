<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    
    <!-- Check OS -->
    <PropertyGroup>
        <OS Condition="$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::Windows)))">Windows</OS>
        <OS Condition="$([System.Runtime.InteropServices.RuntimeInformation]::IsOSPlatform($([System.Runtime.InteropServices.OSPlatform]::OSX)))">OSX</OS>
    </PropertyGroup>
    
    <!-- Find game folder -->
    <Choose>
        <When Condition="$(OS) == 'OSX'">
            <PropertyGroup>
                <GamePath Condition="!Exists('$(GamePath)')">$(HOME)/Library/Application Support/Steam/steamapps/common/Escape from Duckov</GamePath>
            </PropertyGroup>
        </When>
        <When Condition="$(OS) == 'Windows_NT'">
            <PropertyGroup>
                <!-- registry paths -->
                <GamePath Condition="!Exists('$(GamePath)')">$([MSBuild]::GetRegistryValueFromView('HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\Steam App 3167020', 'InstallLocation', null, RegistryView.Registry64, RegistryView.Registry32))</GamePath>

                <!-- derive from Steam library path -->
                <_SteamLibraryPath>$([MSBuild]::GetRegistryValueFromView('HKEY_CURRENT_USER\SOFTWARE\Valve\Steam', 'SteamPath', null, RegistryView.Registry32))</_SteamLibraryPath>
                <GamePath Condition="!Exists('$(GamePath)') AND '$(_SteamLibraryPath)' != ''">$(_SteamLibraryPath)\steamapps\common\Escape from Duckov</GamePath>
            </PropertyGroup>
        </When>
    </Choose>
</Project>
